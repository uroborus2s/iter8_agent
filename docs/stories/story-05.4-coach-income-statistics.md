# 用户故事 05.4: 教练收入统计

## 故事信息
- **故事ID**: 05.4
- **故事标题**: 教练收入统计
- **所属史诗**: 史诗05 - 教练管理
- **优先级**: 中
- **负责团队**: 教练端团队 + 后端开发团队

## 故事描述

**作为** 一名平台签约教练
**我想要** 清晰地看到我的收入明细、历史趋势和结算记录
**这样我可以** 方便地管理我的财务，了解我的业务状况，并对未来的工作有更好的规划

## 价值说明

### 核心价值
收入是教练在平台上工作的最直接回报。为教练提供一个透明、准确、易于理解的收入统计和财务管理工具，是建立与教练之间信任关系、提升其安全感和归属感的关键。这体现了平台对教练劳动价值的尊重。

### 业务价值
- **增强教练信任与粘性**: 透明的财务数据能让教练安心，更愿意长期在平台上发展。
- **激励教练提升服务**: 通过数据让教练看到"多劳多得"，激励他们优化自己的课程安排和服务质量，以获得更高收入。
- **降低财务纠纷**: 清晰的账目可以有效减少教练与平台之间的财务误解和纠纷，降低沟通成本。
- **赋能教练商业决策**: 收入趋势和数据分析能帮助教练像CEO一样思考，优化自己的"生意"（如发现哪个时间段收入最高、哪种课程最受欢迎）。

## 详细需求

### 功能需求

#### 1. 收入概览 (Dashboard)
- **入口**: 在教练端工作台，提供"我的收入"或"钱包"入口。
- **关键指标展示**:
    - **本月预估收入**: 当前自然月的累计收入。
    - **账户可提现余额**: 已完成结算、可随时提现的金额。
    - **上月总收入**: 作为对比。
- **收入趋势图**:
    - 以图表（如折线图）形式，展示最近6个月或12个月的月度收入趋势。

#### 2. 收入明细列表
- **列表展示**:
    - 按时间倒序，展示每一笔收入的明细记录。
    - 每条记录包含：课程完成日期、课程类型（私/团）、课程时长、课程金额、平台佣金（或服务费）、最终到手金额。
- **筛选与查询**:
    - 支持按月份筛选查看历史收入明细。
    - (可选) 支持按课程类型筛选。

#### 3. 提现与结算管理
- **提现功能**:
    - 显示"可提现余额"。
    - 提供"提现"按钮，用户输入提现金额。
    - 教练需预先绑定自己的收款账户（如银行卡）。
    - 提现申请提交后，进入平台的财务处理流程。
- **结算记录**:
    - 提供"结算历史"或"提现记录"列表。
    - 展示每次提现的申请时间、金额、状态（处理中、已到账、失败）、实际到账时间。

#### 4. (可选) 深度数据分析
- **收入构成分析**: 以饼图展示不同课程类型（1v1私教, 1v2私教, 团课）的收入占比。
- **高峰时段分析**: 分析教练的收入主要来自哪些天（工作日/周末）或具体时间段。

### 非功能需求
- **数据准确性**: 所有收入和结算数据必须100%准确，与平台的财务核心数据保持一致。
- **安全性**: 提现流程必须有严格的安全验证（如支付密码、短信验证码），防止账户被盗用。收款账户信息的存储必须加密。
- **实时性**: 当一节课完成后，对应的收入应准实时地出现在"预估收入"中。

## 验收标准

### 功能验收标准
- **AC1**: 教练可以查看到本月和历史月份的收入总览及趋势。
- **AC2**: 教练可以查看每一笔课程收入的详细构成（课程费、平台费、实收）。
- **AC3**: 教练可以绑定自己的银行卡，并成功发起提现申请。
- **AC4**: 教练可以查询到自己所有的提现历史和处理状态。
- **AC5**: 所有展示的收入数据，经抽样核对，与后台财务数据完全一致。

### 用户体验验收标准
- **UX1**: 收入数据和趋势图表清晰易懂，非财务专业人士也能轻松理解。
- **UX2**: 收入明细的每一项都清楚明了，没有模糊不清的扣费。
- **UX3**: 提现流程简单、安全。

### 业务目标验收标准
- **BIZ1**: 因收入计算或结算问题产生的教练投诉率 < 0.1%。
- **BIZ2**: 超过80%的教练每月至少查看一次他们的收入报告。

## 依赖关系

### 技术依赖
-   后端账务系统和订单系统
-   支付与交易功能 (Epic 03)
-   用户认证系统
-   （可选）与第三方支付或银行的打款接口对接

### 业务依赖
-   平台与教练的佣金/服务费政策已明确制定。
-   平台的结算周期和提现规则已明确（如T+1结算、每月固定日期提现等）。
-   财务部门已建立好处理教练提现申请的线下或线上流程。

### 外部依赖
-   银行或第三方支付的打款接口。

## 风险与缓解措施

### 主要风险
1.  **数据计算错误**: 因程序bug或逻辑问题，导致教练收入计算错误。
    -   **缓解措施**:
        *   建立严格的测试和对账流程。在上线前，用历史数据进行批量演算和核对。
        *   建立数据监控，对异常的收入计算（如负数、超高金额）进行告警。
        *   提供清晰的申诉渠道，一旦发现问题，能快速响应和修正。
2.  **提现安全风险**: 提现功能可能成为黑客攻击的目标。
    -   **缓解措施**:
        *   采用多因素认证来授权提现操作。
        *   对大额提现或更换收款账户等敏感操作，增加人工审核环节。
        *   监控异常提现行为。
3.  **政策透明度不足**: 教练不理解平台的佣金政策，认为平台"乱扣费"。
    -   **缓解措施**:
        *   在收入明细中，将总金额、平台费、最终收入等每一步都清晰地罗列出来。
        -   提供政策说明的链接和客服咨询渠道。

## 成功指标

### 定量指标
-   **数据准确率**: 100%
-   **提现成功率**: >99.5%
-   **教练投诉率（财务相关）**: <0.1%

### 定性指标
-   **教练信任度**: 教练对平台的收入结算体系高度信任。

## 变更日志

| 日期 | 版本 | 描述 |
| :--- | :--- | :---------- |
|      | 1.0  | 初始版本创建，定义教练收入统计功能 | 