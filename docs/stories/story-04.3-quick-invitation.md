# 用户故事 04.3: 快速邀请功能

## 故事信息
- **故事ID**: 04.3
- **故事标题**: 快速邀请功能
- **所属史诗**: 史诗04 - 社交协作
- **优先级**: 中
- **负责团队**: 前端开发团队 + 社交团队

## 故事描述

**作为** 一名想要发起课程预约的用户
**我想要** 在预约流程中，能够快速地从我的好友列表里选择好友，并向他们一键发送课程邀请
**这样我可以** 方便地组织一次朋友间的网球活动，而不需要在不同App之间反复切换来协调

## 价值说明

### 核心价值
此功能是好友系统价值的直接体现。它将"预约"这个个人行为，无缝地与"社交"连接起来，使用户在产生预约想法的瞬间，就能立刻转化为一个社交邀请动作。这极大地降低了用户组织多人运动的沟通成本，提升了社交功能的活跃度和使用率。

### 业务价值
- **提升社交功能活跃度**: 为好友系统提供核心应用场景，促进用户添加和使用好友功能。
- **提高多人课程（团课/私教1v2）转化率**: 简化邀请流程，能有效提升多人课程的成团率和预约量。
- **增强用户粘性**: 用户在平台上沉淀的社交关系越多，组织活动越方便，离开平台的迁移成本就越高。
- **创造更多预约场景**: "想和朋友打球"成为发起预约的强动因，创造了更多增量预订。

## 详细需求

### 功能需求
1.  **邀请入口**:
    -   在课程详情页或预约确认页，提供"邀请好友"或"为好友预订"的入口。
2.  **好友选择器**:
    -   点击"邀请好友"后，弹出一个好友选择界面。
    -   该界面以列表形式展示用户的全部好友，包含头像和昵称。
    -   支持按姓名搜索好友。
    -   支持多选，可以选择一个或多个好友。
3.  **一键发送邀请**:
    -   选择好友后，点击"发送邀请"按钮。
    -   系统通过平台内的消息通知系统，向被选中的好友发送一条课程邀请卡片。
4.  **邀请卡片内容**:
    -   卡片需包含课程的核心信息（课程类型、教练/场地、时间）。
    -   对于需要对方支付的邀请（如费用分摊），需清晰展示价格。
    -   对于"为好友预订"（发起人支付全部费用）的邀请，则无需展示价格，只显示"XXX为你预订了课程"。
    -   卡片上有"接受"和"拒绝"按钮。
5.  **邀请状态跟踪**:
    -   发起人可以在自己的预约详情或消息中心里，看到邀请的状态（如"好友A已接受"，"好友B已拒绝"，"等待好友C确认"）。
6.  **智能推荐邀请 (可选)**:
    -   在好友选择器中，可以智能地将"最近一起上过课的"或"有共同空闲时间的"好友排在前面，提升选择效率。

### 非功能需求
-   **性能**: 好友选择器的加载时间<1秒，即使有数百个好友。
-   **可用性**: 好友搜索和选择的交互必须流畅、无卡顿。
-   **实时性**: 邀请的发送和好友接受/拒绝的状态反馈，应是实时的。

## 验收标准

### 功能验收标准
-   **AC1**: 用户可以在预约流程中，成功打开好友选择器。
-   **AC2**: 用户可以选择一个或多个好友，并成功发送课程邀请。
-   **AC3**: 被邀请的好友能在自己的消息中心收到邀请卡片。
-   **AC4**: 被邀请者点击"接受"或"拒绝"后，发起人能看到对应的状态更新。
-   **AC5**: 对于需要付费的邀请，被邀请者接受后能进入支付流程。

### 用户体验验收标准
-   **UX1**: 邀请入口清晰易找。
-   **UX2**: 好友选择和搜索体验流畅。
-   **UX3**: 邀请卡片的信息清晰、完整，操作按钮明确。

### 业务目标验收标准
-   **BIZ1**: 超过20%的多人课程是通过"快速邀请"功能发起的。
-   **BIZ2**: 使用该功能的用户，其好友数量比普通用户平均多30%。

## 依赖关系

### 技术依赖
-   好友系统 (Story 04.1)
-   消息通知系统
-   预约流程核心功能 (Epic 02)
-   （可选）费用分摊功能 (Story 03.6)

### 业务依赖
-   平台允许用户为他人预订课程。

### 外部依赖
-   消息推送服务

## 风险与缓解措施

### 主要风险
1.  **信息骚扰**: 用户可能频繁地向好友发送不希望的邀请。
    -   **缓解措施**:
        *   被邀请方可以设置"免打扰"或"屏蔽某人的邀请"。
        *   对短时间内发送大量邀请的用户进行频率限制。
2.  **邀请流程与预约流程耦合过紧**: 复杂的邀请逻辑可能影响核心预约流程的稳定性和简洁性。
    -   **缓解措施**:
        *   将邀请设计为预约流程中的一个"分支"或"附加"步骤，而不是阻塞主流程。
        *   在技术实现上，尽可能将邀请服务与订单服务解耦。

## 成功指标

### 定量指标
-   **功能使用率**: >20%的预约会使用邀请功能
-   **邀请成功率**: >50%的邀请被好友接受
-   **邀请发送耗时**: <3秒

### 定性指标
-   **用户反馈**: 用户认为此功能让组织朋友打球变得"非常简单"。

## 变更日志

| 日期 | 版本 | 描述 |
| :--- | :--- | :---------- |
|      | 1.0  | 初始版本创建，定义快速邀请功能 | 