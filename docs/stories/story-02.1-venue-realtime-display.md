# 用户故事 02.1: 场地信息实时展示

## 故事信息
- **故事ID**: 02.1
- **故事标题**: 场地信息实时展示
- **所属史诗**: 史诗02 - 核心预约体验
- **优先级**: 高
- **负责团队**: 前端开发团队 + 后端开发团队

## 故事描述

**作为** 一名想要预约场地的用户
**我想要** 在小程序上看到实时的场地可用时间、价格和详细信息
**这样我可以** 快速做出决策，避免信息不透明导致的反复沟通和预约失败

## 价值说明

### 核心价值
信息透明是提升用户决策效率和信任度的关键。通过实时展示场地状态，将传统的、不透明的电话咨询模式，转变为现代的、所见即所得的在线预订模式，极大地优化了核心预约体验。

### 业务价值
- **提升预约转化率**: 清晰的信息展示能帮助用户快速决策，减少犹豫和流失
- **降低运营成本**: 用户可自助查询，无需人工客服介入回答场地状态问题
- **提高场地利用率**: 透明的空闲时段信息，有助于吸引用户填充非高峰时段
- **增强用户信任**: 实时、准确的信息是建立用户信任的基础

## 详细需求

### 功能需求
1.  **场地列表页**:
    *   以卡片形式展示多个场地，每个卡片包含关键信息：场地名称、封面图、标签（如"室内红土"、"室外硬地"）、当前价格范围、距离用户的距离。
    *   提供搜索框，支持按场地名称或区域搜索。
    *   提供筛选功能，支持按区域、场地类型、价格范围等条件筛选。
    *   提供排序功能，支持按距离、价格、评分等方式排序。
2.  **场地详情页**:
    *   **头部信息**: 展示场地高清轮播图、场地名称、评分、地址和联系电话。
    *   **实时时间表 (Time-Slot View)**:
        *   以表格或时间轴的形式，展示未来7天的场地可用状态。
        *   横向为日期，纵向为时间段（如每30分钟或1小时一个格子）。
        *   清晰地区分"可预约"、"已预定"、"不可用"三种状态，并用不同颜色标识。
        *   点击"可预约"的时间段，会显示该时段的价格。
    *   **详细信息**: 包括场地设施（如休息区、淋浴、停车场）、营业时间、用户须知等。
    *   **用户评价**: 展示其他用户对该场地的评价和打分。
3.  **状态实时同步**:
    *   当一个时间段被预订后，所有客户端的该时间段状态应在30秒内更新为"已预定"。
    *   后台运营人员可以手动锁定或解锁某个时间段，前端实时同步。

### 非功能需求
-   **性能**:
    *   场地列表页加载时间<2秒。
    *   时间表视图的渲染和切换流畅，不卡顿。
    *   状态同步的延迟<30秒。
-   **数据准确性**: 场地可用状态的准确率必须>99.9%，这是系统的生命线。
-   **可用性**: 时间表视图在移动端上易于浏览和点击，不会误触。

## 验收标准

### 功能验收标准
-   **AC1**: 用户可以在列表页通过筛选和排序找到目标场地。
-   **AC2**: 场地详情页的时间表能正确显示未来7天的可用、已预定、不可用状态。
-   **AC3**: 点击可预约的时间段，能看到正确的价格，并能进入下一步预约流程。
-   **AC4**: 一个时间段被预定后，其他用户在30秒内无法再次选择该时段。
-   **AC5**: 后台更新场地信息（如价格、设施）后，前端能同步显示。

### 用户体验验收标准
-   **UX1**: 场地列表和详情页的布局清晰，信息一目了然。
-   **UX2**: 时间表视图的交互（滑动、点击）流畅自然。
-   **UX3**: 场地的三种状态（可预约/已预定/不可用）颜色区分明显，易于理解。

### 业务目标验收标准
-   **BIZ1**: 因场地信息不明确导致的客服咨询量减少80%。
-   **BIZ2**: 用户从浏览场地到发起预约的转化率达到40%。

## 依赖关系

### 技术依赖
-   后端场地管理系统
-   数据库（用于存储场地信息和预约状态）
-   实时通信技术（如WebSocket或轮询）用于状态同步
-   地图服务API（用于计算距离和展示位置）

### 业务依赖
-   场地信息已录入系统，包括基础信息、价格、照片等
-   已定义好高峰和非高峰时段的价格策略

### 外部依赖
-   地图服务提供商的稳定性

## 风险与缓解措施

### 主要风险
1.  **并发冲突 (Race Condition)**: 两个用户在短时间内同时预订同一个时间段。
    -   **缓解措施**: 在数据库层面使用事务和行级锁，确保最终只有一个用户能预订成功。在用户点击预订时，可以先进行一次"预锁定"。
2.  **数据不一致**: 前后端状态同步失败，导致前端显示可预约但后端已预定。
    -   **缓解措施**:
        *   建立可靠的实时同步机制，并有心跳和重连保证。
        *   在最终提交预约时，后端必须做最终的可用性校验，作为最后一道防线。
        *   记录同步失败的日志，并设置告警。

## 成功指标

### 定量指标
-   **状态同步平均延迟**: <15秒
-   **预约冲突率**: <0.01%
-   **页面加载时间**: 列表页<2秒，详情页<3秒

### 定性指标
-   **用户反馈**: 用户评价信息"准确"、"实时"、"方便"的反馈增多。
-   **易用性测试**: 用户在3次点击内能找到特定场地的可用时间。

## 变更日志

| 日期 | 版本 | 描述 |
| :--- | :--- | :---------- |
|      | 1.0  | 初始版本创建，定义场地信息实时展示功能 |

## 相关链接

- [史诗02: 核心预约体验](../epics/epic-02-core-booking.md)
- [故事02.2: 团课快速预约](story-02.2-group-class-booking.md)
- [故事02.3: 私教预约流程](story-02.3-private-lesson-booking.md) 