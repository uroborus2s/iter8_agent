# 用户故事 01.2: 手机号注册登录

## 故事信息
- **故事ID**: 01.2
- **故事标题**: 手机号注册登录
- **所属史诗**: 史诗01 - 用户基础体验
- **优先级**: 高
- **负责团队**: 前端开发团队 + 后端开发团队

## 故事描述

**作为** 不希望使用微信授权或没有安装微信的用户
**我想要** 通过手机号和验证码完成注册和登录
**这样我可以** 在不同设备上（如Web端）无障碍地使用平台

## 价值说明

### 核心价值
提供手机号注册作为微信注册的补充，满足不同用户群体的需求和偏好，增强了平台的可访问性，并为多端登录和账户安全提供了基础。

### 业务价值
- **扩大用户覆盖面**: 触达不使用或不愿使用微信登录的用户
- **账户安全增强**: 手机号可作为账户恢复和安全验证的关键凭证
- **多端体验一致性**: 手机号是连接小程序、Web、App等不同终端的通用ID

## 详细需求

### 功能需求
1.  **输入手机号**: 提供输入手机号的文本框，并对格式进行前端校验
2.  **获取验证码**:
    *   点击"获取验证码"按钮，后端调用短信服务API发送验证码到用户手机
    *   按钮有60秒的冷却倒计时，防止重复发送
    *   验证码为6位数字，10分钟内有效
3.  **输入验证码**: 提供输入验证码的文本框
4.  **注册/登录**:
    *   后端验证手机号和验证码的匹配性与有效性
    *   如果手机号未注册，则自动创建新账户
    *   如果手机号已存在，则直接登录
5.  **成功跳转**: 操作成功后，自动登录并跳转到应用首页

### 非功能需求
-   **性能**: 验证码发送延迟<10秒，登录验证响应<2秒
-   **安全性**:
    *   短信接口调用需要进行安全验证，防止被恶意攻击
    *   限制单个手机号和IP地址的验证码请求频率
    *   验证码在后端存储和验证，不在前端暴露
-   **可靠性**: 短信服务到达率>99%

## 验收标准

### 功能验收标准
-   **AC1**: 用户输入正确的手机号和验证码后可以成功注册或登录
-   **AC2**: 获取验证码按钮在点击后进入60秒冷却倒计时
-   **AC3**: 输入错误的验证码或手机号格式不正确时，有明确的错误提示
-   **AC4**: 验证码在10分钟后失效，无法用于登录

### 用户体验验收标准
-   **UX1**: 注册流程清晰简洁，输入框有明确的标签和提示
-   **UX2**: 验证码发送和验证过程有清晰的状态反馈（如"发送中..."、"验证成功"）
-   **UX3**: 手机号输入框支持自动填充和格式化

### 业务目标验收标准
-   **BIZ1**: 手机号注册用户占比达到15%以上
-   **BIZ2**: 登录成功率>98%

## 依赖关系

### 技术依赖
-   短信服务提供商API（如腾讯云、阿里云）
-   后端用户账户系统
-   数据库服务
-   前端表单验证库

### 业务依赖
-   已采购并配置好短信服务
-   已定义好验证码的发送频率和风控规则

### 外部依赖
-   短信服务商的稳定性
-   用户手机信号和网络状况

## 风险与缓解措施

### 主要风险
1.  **短信轰炸攻击**: 恶意用户可能利用接口大量发送短信，造成资费损失
    -   **缓解措施**:
        *   设置图形验证码或滑块验证
        *   严格限制单手机号和IP的请求频率
        *   监控异常请求并设置告警
2.  **短信延迟或丢失**: 用户可能无法及时收到验证码
    -   **缓解措施**:
        *   选择可靠的短信服务商，使用高质量通道
        *   提供语音验证码作为备选
        *   在界面上提示用户检查手机信号或垃圾短信箱

## 成功指标

### 定量指标
-   **验证码到达率**: >99%
-   **验证码发送平均耗时**: <10秒
-   **登录/注册成功率**: >98%

### 定性指标
-   **用户满意度**: 用户对手机注册流程的满意度>4.2/5
-   **流程顺畅度**: 用户反馈流程卡顿或失败的比例<2%

## 变更日志

| 日期 | 版本 | 描述 |
| :--- | :--- | :---------- |
|      | 1.0  | 初始版本创建，定义手机号注册登录功能 |

## 相关链接

- [史诗01: 用户基础体验](../epics/epic-01-user-foundation.md)
- [故事01.1: 微信一键注册](story-01.1-wechat-registration.md)
- [故事01.3: 登录状态管理](story-01.3-login-state-management.md)

## 变更日志

| 日期 | 版本 | 描述 | 作者 |
| :--- | :------ | :---------- | :----- |
| 2024-12-27 | 1.0 | 初始版本创建，详细定义手机号注册登录流程 | 姜尚 | 